<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Samuel Dionne-Riel">
<title>January 2020 round-up — Mobile NixOS</title>
<link rel="stylesheet" href="../styles/styles.css">
<link lang="en" rel="alternate" type="application/rss+xml" title="RSS feed (EN)" href="../index.xml" />
</head>
<body class="news-article news_2020-02-04-january-2020-round-up article">
<header>
  <nav>
    <ul>
      <li>
        <h1>
          <a href='../index.html' class=''>Mobile NixOS</a>
        </h1>
      </li>
      <li><a href='../getting-started.html' class=''>Getting Started</a></li>
      <li><a href='../resources.html' class=''>Resources</a></li>
      <li><a href='../devices/index.html' class=''>Devices List</a></li>
    </ul>
  </nav>
</header>

<div id="header">
<h1>January 2020 round-up</h1>
<div class="details">
<span id="author" class="author">Samuel Dionne-Riel</span><br>
<span id="revdate">February 4th 2020</span>
</div>
</div>

  <div class="article-header" style="background-image: url('../news/2020-02-04-january-2020-round-up.jpeg');"></div>

<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This update is the third in a series of regular updates on the state of the
project.</p>
</div>
<div class="paragraph">
<p>Usually, only changes that have been accepted and merged in Mobile NixOS in the
given month are chronicled here. There&#8217;s always
<a href="https://github.com/NixOS/mobile-nixos/pulls">more work</a> currently in-progress.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notable_changes">Notable changes</h3>
<div class="paragraph">
<p>Only <a href="https://github.com/NixOS/mobile-nixos/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+merged%3A2020-01">1 PR was merged</a>
during the month. Though, keep on reading, as one of the biggest PR, started in
mid-December, was the main focus of the month.</p>
</div>
<div class="sect3">
<h4 id="_new_stage_1_init">New Stage-1 init</h4>
<div class="paragraph">
<p>This is quite the misnomer, while true, that the PR mainly introduced a
completely re-done init, it brought much more.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"New-style" USB gadget (gadgetfs) handling.</p>
</li>
<li>
<p>USB Networking for newer devices.</p>
</li>
<li>
<p>Vendor partition firmware loading.</p>
</li>
<li>
<p>Logs multiplexing and saving in stage-1.</p>
</li>
<li>
<p>Proper reboot and poweroff in stage-1.</p>
</li>
<li>
<p>Actual handling of NixOS-configured <code>specialFileSystems</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This new init is built using a dependencies-based system, reducing the
complexities from the inflexible "big script" approach of the previous init.
With this new approach, we can simply dump all of the things we need to happen
in the init, tell them how they&#8217;re linked, and boot. The current implementation
is naïve, but even with a naïve approach, the benefits are apparent. First, the
developer does not need to care about the ordering of things, only describing
what has to be, and what to do. Then, the relatively surprising part: this made
things a bit quicker to boot.</p>
</div>
<div class="paragraph">
<p>This reduced reliance on sleep and wait times during the boot to provide
assurance that things were ready, meaning that steps happen much quicker in
succession. To the annoyance of the author, this means that the
well-choreographed boot images whizz by too quickly, reducing their
meaningfulness.</p>
</div>
<div class="paragraph">
<p>In the end, this is a hidden change, that serves mainly to ensure a rock-solid
foundation for what&#8217;s coming soon.</p>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/NixOS/mobile-nixos/pull/66">the PR</a> for more details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upcoming_changes">Upcoming changes</h3>
<div class="paragraph">
<p>Speaking of coming soon, As previewed <a href="https://twitter.com/samueldr/status/1223139451196661760">in a tweet</a>,
work is in progress to provide a graphical interface that can be used in early
boot. This can be used to make a "recovery" system tailored to the project&#8217;s
need, and more importantly, allow interaction in the boot process.</p>
</div>
<div class="paragraph">
<p>The main focus of early interaction is to allow selecting a generation to boot
into. This is part of the NixOS experience, and is currently missing. Another
benefit to an early UI is that it will give us the opportunity to enter a
passphrase to unlock an eventually coming encrypted system.</p>
</div>
<div class="paragraph">
<p>Keep your eyes peeled for the coming PR!</p>
</div>
</div>
<div class="sect2">
<h3 id="_ports">Ports</h3>
<div class="paragraph">
<p>No new port were made in January. There is still a
<a href="https://mobile.nixos.org/devices/index.html">total of 10 devices</a> you can
build for.</p>
</div>
</div>
</div>
<footer id="footer">
  <nav>
    <ul>
      <li></li>
      
      <li><a href='https://github.com/NixOS/mobile-nixos-website//blob/master/website/news/2020-02-04-january-2020-round-up.adoc'>Page Source</a></li>
      <li><a href='https://github.com/NixOS/mobile-nixos-website//edit/master/website/news/2020-02-04-january-2020-round-up.adoc'>Edit</a></li>
      
      <li><a href='../sitemap.html' class=''>Site Map</a></li>
    </ul>
  </nav>
</footer>

</body>
</html>